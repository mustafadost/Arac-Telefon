<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ara√ß Sahibi Bilgisi</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-green: #2ecc71;
            --bg-dark: #0f172a;
        }

        body { 
            font-family: 'Inter', sans-serif; background: #f4f7f6; margin: 0; 
            display: flex; justify-content: center; align-items: center; height: 100vh;
        }

        .card { 
            background: white; width: 350px; border-radius: 45px; 
            box-shadow: 0 20px 40px rgba(0,0,0,0.1); overflow: hidden; text-align: center;
        }

        /* √úst Antrasit B√∂l√ºm */
        .header { 
            background: linear-gradient(180deg, #1e293b 0%, #0f172a 100%); 
            padding: 45px 20px; color: white; 
        }
        .header-title { 
            font-size: 13px; letter-spacing: 2px; color: #94a3b8; 
            font-weight: 400; text-transform: uppercase; margin-bottom: 20px; 
        }
        .plaka { 
            font-size: 34px; font-weight: 800; background: white; color: #1e293b; 
            padding: 10px 30px; border-radius: 18px; display: inline-block;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }

        /* Alt Beyaz B√∂l√ºm */
        .content { padding: 40px 30px; }
        
        .status-badge { 
            display: inline-flex; align-items: center; gap: 8px; 
            padding: 10px 25px; border-radius: 50px; font-weight: 700; 
            font-size: 15px; margin-bottom: 25px;
            background: #e8f5e9; color: #2e7d32; border: 1px solid #c8e6c9;
        }

        .instruction-text { 
            color: #64748b; font-size: 15px; margin-bottom: 30px; 
        }

        .btn-call { 
            display: flex; align-items: center; justify-content: center; gap: 12px; 
            background: #2ecc71; color: white; text-decoration: none; 
            padding: 20px; border-radius: 25px; font-weight: 700; font-size: 20px; 
            transition: 0.3s; box-shadow: 0 10px 20px rgba(46, 204, 113, 0.3);
            text-transform: uppercase;
        }
        .btn-call:hover { transform: translateY(-3px); }

        .phone-number { 
            margin-top: 25px; font-weight: 700; font-size: 22px; 
            color: #1e293b; letter-spacing: 1px;
        }

        #loader { font-weight: 600; color: #1e293b; font-size: 14px; }
    </style>
</head>
<body>
    <div id="loader">L√úTFEN BEKLEYƒ∞N...</div>

    <div class="card" id="main-ui" style="display:none">
        <div class="header">
            <div class="header-title">ARA√á SAHƒ∞Bƒ∞ Bƒ∞LGƒ∞Sƒ∞</div>
            <div class="plaka" id="plaka-box">-- --- --</div>
        </div>
        <div class="content">
            <div id="status-container"></div>
            
            <div class="instruction-text">Acil durumlar i√ßin s√ºr√ºc√ºye ula≈üabilirsiniz:</div>
            
            <div id="action-area"></div>
            
            <div class="phone-number" id="phone-display"></div>
        </div>
    </div>

   <script>
    // 1. BURADAKƒ∞ URL'Nƒ∞N SONUNUN /exec OLDUƒûUNDAN EMƒ∞N OL
    const SCRIPT_URL = "https://script.google.com/macros/s/AKfycby6Vpgc7uilr7V9RB-K8um2jJtDhCFFpm3U4B-i3SqZ_gOr2xf_WjrO95uJjKLJb_5vQA/exec"; 

    const params = new URLSearchParams(window.location.search);
    const id = params.get('id');

    // Veri √ßekme fonksiyonu
    function render(data) {
        console.log("Veri geldi:", data); // Tarayƒ±cƒ± konsolunda kontrol etmek i√ßin
        const u = data.find(x => x.id == id);
        
        if(!u) {
            document.getElementById('loader').innerText = "ARA√á BULUNAMADI!";
            return;
        }

        document.getElementById('loader').style.display = 'none';
        document.getElementById('main-ui').style.display = 'block';
        document.getElementById('plaka-box').innerText = u.plaka;

        const statusContainer = document.getElementById('status-container');
        const actionArea = document.getElementById('action-area');
        const phoneDisplay = document.getElementById('phone-display');

        if(u.durum === "ACIK") {
            statusContainer.innerHTML = `<div class="status-badge">‚óè ƒ∞LETƒ∞≈ûƒ∞ME A√áIK</div>`;
            actionArea.innerHTML = `<a href="tel:${u.tel}" class="btn-call">üìû S√úR√úC√úY√ú ARA</a>`;
            phoneDisplay.innerText = u.tel;
        } else {
            statusContainer.innerHTML = `<div class="status-badge" style="background:#ffebee; color:#c62828; border-color:#ffcdd2;">‚óè ≈ûU AN ME≈ûGUL</div>`;
            actionArea.innerHTML = `<div style="padding:20px; background:#f8fafc; border-radius:20px; color:#64748b; font-size:14px; border:1px dashed #cbd5e1;">S√ºr√ºc√º ≈üu anda m√ºsait deƒüil.</div>`;
            phoneDisplay.innerText = "";
        }
    }

    // Script'i sayfaya ekleme
    if(id) {
        const script = document.createElement('script');
        // URL'ye rastgele bir sayƒ± ekleyerek √∂nbelleƒüi (cache) temizliyoruz
        script.src = SCRIPT_URL + "?id=" + id + "&callback=render&t=" + new Date().getTime();
        script.onerror = function() {
            document.getElementById('loader').innerText = "BAƒûLANTI HATASI! L√ºtfen URL'yi kontrol edin.";
        };
        document.body.appendChild(script);
    } else {
        document.getElementById('loader').innerText = "GE√áERSƒ∞Z ARA√á ID!";
    }
</script>
