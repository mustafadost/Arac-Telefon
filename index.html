<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AraÃ§ Ä°letiÅŸim</title>
    <style>
        body { font-family: 'Segoe UI', sans-serif; background: #f0f2f5; display: flex; justify-content: center; align-items: center; min-height: 100vh; margin: 0; }
        .card { background: white; width: 90%; max-width: 380px; border-radius: 25px; box-shadow: 0 20px 40px rgba(0,0,0,0.15); overflow: hidden; text-align: center; }
        .header { background: #1a1a1a; padding: 40px 20px; color: white; }
        .plaka { background: white; color: black; display: inline-block; padding: 8px 20px; border-radius: 10px; font-weight: bold; font-size: 1.6rem; border: 2px solid black; margin-top: 10px; }
        .content { padding: 30px; }
        .btn { display: block; background: #2ecc71; color: white; text-decoration: none; padding: 18px; border-radius: 15px; font-weight: bold; font-size: 1.2rem; margin-top: 20px; box-shadow: 0 5px 15px rgba(46, 204, 113, 0.3); }
        .status { display: inline-block; padding: 6px 15px; border-radius: 20px; font-size: 0.85rem; font-weight: bold; margin-bottom: 15px; }
        .acik { background: #e8f5e9; color: #1b5e20; border: 1px solid #c8e6c9; }
        .kapali { background: #ffebee; color: #c62828; border: 1px solid #ffcdd2; }
        #loading { padding: 50px; font-weight: bold; color: #555; }
    </style>
</head>
<body>

<div class="card">
    <div id="loading">VERÄ°LER ALINIYOR...</div>
    <div id="main" style="display:none;">
        <div class="header">
            <div style="font-size: 0.8rem; opacity: 0.8; letter-spacing: 1px;">ARAÃ‡ SAHÄ°BÄ° BÄ°LGÄ°SÄ°</div>
            <div id="plaka-box" class="plaka">--</div>
        </div>
        <div class="content">
            <div id="durum-etiket"></div>
            <div id="iletisim-var" style="display:none;">
                <p style="color: #666;">Acil bir durumda aÅŸaÄŸÄ±daki butona tÄ±klayarak sÃ¼rÃ¼cÃ¼ye ulaÅŸabilirsiniz.</p>
                <a id="tel-link" href="#" class="btn">ğŸ“ SÃœRÃœCÃœYÃœ ARA</a>
                <p id="tel-no" style="font-weight: bold; margin-top: 15px; font-size: 1.1rem; color: #333;"></p>
            </div>
            <div id="iletisim-yok" style="display:none;">
                <p style="color: #666; padding: 20px; background: #f8f9fa; border-radius: 15px;">SÃ¼rÃ¼cÃ¼ ÅŸu an iletiÅŸim bilgilerini gizlemeyi tercih etti.</p>
            </div>
        </div>
    </div>
</div>

<script>
    const ss_id = '1Hz-awgJc2LcniYFymdNpB8rdpBkAUWcZHQ4eaveSfzA';
    // Veriyi en saf haliyle Ã§ekmek iÃ§in /pubhtml yerine /gviz/tq kullanÄ±yoruz
    const url = `https://docs.google.com/spreadsheets/d/${ss_id}/gviz/tq?tqx=out:json`;

    fetch(url)
        .then(res => res.text())
        .then(data => {
            const json = JSON.parse(data.substring(data.indexOf("{"), data.lastIndexOf("}") + 1));
            const row = json.table.rows[0].c;

            const durum = row[0] ? row[0].v.toString().toUpperCase() : "KAPALI";
            const tel = row[1] ? (row[1].f || row[1].v).toString() : "";
            const plaka = row[2] ? row[2].v.toString() : "";

            document.getElementById('loading').style.display = 'none';
            document.getElementById('main').style.display = 'block';
            document.getElementById('plaka-box').innerText = plaka;

            if (durum.includes("ACIK")) {
                document.getElementById('durum-etiket').innerHTML = '<span class="status acik">â— Ä°LETÄ°ÅÄ°ME AÃ‡IK</span>';
                document.getElementById('tel-link').href = "tel:" + tel;
                document.getElementById('tel-no').innerText = tel;
                document.getElementById('iletisim-var').style.display = 'block';
            } else {
                document.getElementById('durum-etiket').innerHTML = '<span class="status kapali">â— ÅU AN MEÅGUL</span>';
                document.getElementById('iletisim-yok').style.display = 'block';
            }
        })
        .catch(err => {
            document.getElementById('loading').innerText = "BAÄLANTI HATASI!";
            console.error(err);
        });
</script>

</body>
</html>
