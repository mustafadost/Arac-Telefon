<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>S√ºr√ºc√º Bilgi Sistemi</title>
    <style>
        body { font-family: 'Segoe UI', sans-serif; background: #f0f2f5; display: flex; justify-content: center; align-items: center; height: 100vh; margin: 0; }
        .container { background: white; padding: 30px; border-radius: 20px; box-shadow: 0 10px 25px rgba(0,0,0,0.1); text-align: center; width: 90%; max-width: 400px; }
        .plaka { font-size: 2.2rem; font-weight: bold; color: #1c1e21; margin-bottom: 10px; border: 3px solid #1c1e21; display: inline-block; padding: 5px 20px; border-radius: 10px; }
        .status { font-size: 1.2rem; margin: 20px 0; font-weight: 600; }
        .online { color: #2ecc71; }
        .offline { color: #e74c3c; }
        .btn-call { display: block; background: #1877f2; color: white; text-decoration: none; padding: 15px; border-radius: 12px; font-weight: bold; font-size: 1.1rem; transition: 0.3s; }
        .btn-call:hover { background: #166fe5; }
        .msg { color: #65676b; font-size: 0.9rem; margin-top: 15px; }
        #loader { font-weight: bold; color: #1877f2; }
        .hidden { display: none; }
    </style>
</head>
<body>

<div class="container">
    <div id="loader">üîÑ S√ºr√ºc√º bilgileri alƒ±nƒ±yor...</div>
    
    <div id="content" class="hidden">
        <div class="plaka" id="plaka-no">-- --- --</div>
        <div id="status-area" class="status"></div>
        <a id="call-link" href="#" class="btn-call hidden">S√úR√úC√úY√ú ARA</a>
        <div id="info-msg" class="msg"></div>
    </div>
</div>

<script>
    // BURAYI KENDƒ∞ APPS SCRIPT Lƒ∞NKƒ∞NLE DEƒûƒ∞≈ûTƒ∞R
    const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbwJAiEY2sEx_10DHt-iHgRaJB3N_TMShoXhv9cFk6il0JwVo6LDSzv5A8fJkJPg2Z97/exec";

    function getParam(name) {
        return new URLSearchParams(window.location.search).get(name);
    }

    const carId = getParam('id'); // Artƒ±k ID √ºzerinden arƒ±yoruz

    if (!carId) {
        document.getElementById('loader').innerText = "‚ùå Ge√ßersiz Link (ID Bulunamadƒ±)";
    } else {
        const script = document.createElement('script');
        script.src = `${SCRIPT_URL}?callback=handleResponse`;
        document.body.appendChild(script);
    }

    function handleResponse(data) {
        document.getElementById('loader').classList.add('hidden');
        document.getElementById('content').classList.remove('hidden');

        // Gelen veriler i√ßinde ID'ye g√∂re arama yapƒ±yoruz
        const car = data.find(item => item.id == carId);

        if (car) {
            document.getElementById('plaka-no').innerText = car.plaka;
            
            if (car.durum === "ACIK") {
                document.getElementById('status-area').innerHTML = '<span class="online">‚óè S√ºr√ºc√º M√ºsait</span>';
                document.getElementById('call-link').classList.remove('hidden');
                document.getElementById('call-link').href = `tel:${car.tel}`;
                document.getElementById('info-msg').innerText = "Aracƒ±n kaldƒ±rƒ±lmasƒ± i√ßin arayabilirsiniz.";
            } else {
                document.getElementById('status-area').innerHTML = '<span class="offline">‚óã S√ºr√ºc√º ≈ûu An Me≈ügul</span>';
                document.getElementById('info-msg').innerText = "L√ºtfen daha sonra tekrar deneyiniz.";
            }
        } else {
            document.getElementById('loader').classList.remove('hidden');
            document.getElementById('loader').innerText = "‚ùå Ara√ß kaydƒ± bulunamadƒ±.";
        }
    }
</script>

</body>
</html>

