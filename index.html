<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Araç Sahibine Ulaş</title>

<style>
body{
  font-family:Arial, sans-serif;
  background:#f2f4f7;
  display:flex;
  justify-content:center;
  align-items:center;
  height:100vh;
  margin:0;
}
.box{
  background:white;
  padding:30px;
  border-radius:12px;
  box-shadow:0 5px 20px rgba(0,0,0,0.1);
  text-align:center;
  width:90%;
  max-width:400px;
}
button{
  background:#25D366;
  color:white;
  border:none;
  padding:15px 25px;
  font-size:16px;
  border-radius:8px;
  cursor:pointer;
  width:100%;
}
button:hover{
  opacity:0.9;
}
.loading{
  color:#555;
}
.error{
  color:red;
}
</style>
</head>

<body>

<div class="box">
  <h2>Araç Sahibine Ulaş</h2>
  <div id="content" class="loading">Yükleniyor...</div>
</div>

<script>

const params = new URLSearchParams(window.location.search);
const id = params.get("id");

if(!id){
  document.getElementById("content").innerHTML =
    "<div class='error'>Plaka parametresi bulunamadı.</div>";
}else{

fetch("https://script.google.com/macros/s/AKfycbxxUYu11ujEg59ViirR2ZF-gVFbQXQdp_fnQ7UIt7xzk8N3OL8zsBRrQP3kBiPc3Mj0eA/exec?id=" + id)
.then(response => response.json())
.then(data => {

  if(data.success){

    const mesaj = "Aracınızla ilgili size ulaşmak istiyorum.";
    const whatsappLink =
      "https://wa.me/" + data.telefon +
      "?text=" + encodeURIComponent(mesaj);

    document.getElementById("content").innerHTML =
      `<button onclick="window.location.href='${whatsappLink}'">
        WhatsApp ile Mesaj Gönder
      </button>`;

  }else{
    document.getElementById("content").innerHTML =
      "<div class='error'>Araç bulunamadı.</div>";
  }

})
.catch(error => {
  document.getElementById("content").innerHTML =
    "<div class='error'>Sistem hatası oluştu.</div>";
});

}

</script>

</body>
</html>
