<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>AraÃ§ Ä°letiÅŸim Sistemi</title>

<style>

body{
  margin:0;
  font-family: Arial, sans-serif;
  background: linear-gradient(135deg,#f5f7fa,#e4e8f0);
  text-align:center;
  padding:20px;
}

#container{
  max-width:500px;
  margin:auto;
}

#plakaBox{
  font-size:38px;
  font-weight:900;
  letter-spacing:4px;
  margin:25px 0;
  padding:18px;
  border-radius:14px;
  background: linear-gradient(135deg,#111,#333);
  color:#fff;
  box-shadow:0 6px 18px rgba(0,0,0,0.25);
}

.btn{
  width:100%;
  padding:18px;
  margin:12px 0;
  font-size:18px;
  font-weight:700;
  border:none;
  border-radius:12px;
  cursor:pointer;
  color:white;
  transition:0.2s;
}

.btn:active{
  transform:scale(0.97);
}

.ara{
  background:linear-gradient(135deg,#00c853,#009624);
  font-size:22px;
  padding:22px;
}

.acil{
  background:linear-gradient(135deg,#ff1744,#d50000);
}

.cam{
  background:linear-gradient(135deg,#2979ff,#1565c0);
}

.park{
  background:linear-gradient(135deg,#ff9100,#e65100);
}

#mesaj{
  margin-top:20px;
  font-weight:bold;
  color:#d50000;
}

</style>
</head>

<body>

<div id="container">

<h2>AraÃ§ Sahibi Ä°letiÅŸim</h2>

<div id="plakaBox"></div>

<div id="butonlar" style="display:none;">

<button class="btn ara" onclick="araTel()">
ğŸ“ SÃœRÃœCÃœYÃœ ARA
</button>

<button class="btn acil" onclick="mesajGonder('acil')">
ğŸš¨ ACÄ°L DURUM
</button>

<button class="btn cam" onclick="mesajGonder('cam')">
ğŸªŸ CAM AÃ‡IK
</button>

<button class="btn park" onclick="mesajGonder('park')">
ğŸš— YANLIÅ PARK
</button>

</div>

<div id="mesaj"></div>

</div>

<script>

let telefon = "";
let plaka = "";

const params = new URLSearchParams(window.location.search);
plaka = params.get("id");

if(plaka){
  plaka = plaka.toUpperCase();
  document.getElementById("plakaBox").innerText = plaka;

  fetch("https://script.google.com/macros/s/AKfycbyLbv-VNs0CkTsBWul4ebhgJGt6dbawbwBxAxzTle7OVWGtKRjXBs0QgOEdNE0saYssKQ/exec" + plaka)
  .then(res => res.json())
  .then(data => {

    if(data.kayit){

      if(data.aktif == "AKTIF"){

        telefon = data.telefon;
        document.getElementById("butonlar").style.display="block";

      }else{
        document.getElementById("mesaj").innerText = "AraÃ§ sahibi ÅŸu anda pasif durumda.";
      }

    }else{
      document.getElementById("mesaj").innerText = "Bu plakaya ait kayÄ±t bulunamadÄ±.";
    }

  })
  .catch(()=>{
    document.getElementById("mesaj").innerText="Sunucuya baÄŸlanÄ±lamadÄ±.";
  });

}else{
  document.getElementById("mesaj").innerText="Plaka parametresi yok.";
}

function araTel(){
  window.location.href = "tel:" + telefon;
}

function mesajGonder(tip){

  let mesaj = "";

  if(tip=="acil"){
    mesaj = "ACÄ°L DURUM! " + plaka + " plakalÄ± aracÄ±nÄ±zla ilgili acil bir durum var.";
  }

  if(tip=="cam"){
    mesaj = plaka + " plakalÄ± aracÄ±nÄ±zÄ±n camÄ± aÃ§Ä±k gÃ¶rÃ¼nÃ¼yor.";
  }

  if(tip=="park"){
    mesaj = plaka + " plakalÄ± aracÄ±nÄ±z hatalÄ± park etmiÅŸ olabilir.";
  }

  let link = "https://wa.me/90" + telefon + "?text=" + encodeURIComponent(mesaj);
  window.open(link,"_blank");
}

</script>

</body>
</html>

